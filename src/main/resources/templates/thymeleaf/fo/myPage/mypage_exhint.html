<!DOCTYPE HTML>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
	<title>딜링아트</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="theme-color" content="#000000">
	
	<meta name="author" content="">
	<meta name="keywords" content="미술,아트,경매,수수료,정찰,운송,보험,직거래,dealingart">
	<meta name="description" content="미술품 거래의 새로운 트렌드">
	<meta property="og:description" content="미술품 거래의 새로운 트렌드">
	<meta property="og:type" content="website">
	<meta property="og:title" content="딜링아트">
	<meta property="og:image" content="https://www.dealing-art.com/resources/img/DA_logo_og.png">
	<meta property="og:url" content="https://www.dealing-art.com">
	
	<meta name="robots"content="noindex">
	
	<!-- google -->
    <meta name="google-site-verification" content="EKiW_Lm3Qw-DYnLT9qokEpZT2Sa8tSQuVWhVEvs4kPk" />
    <!-- faceBook -->
    <meta name="facebook-domain-verification" content="bgotqya9tcsrgrmspnq0uywh85kjzh" />
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- HTML의 <head> 섹션에 전체 사이트 태그를 복사합니다. -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-WRJBSR52MT"></script>
	
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-WRJBSR52MT');
	</script>
	
	<!-- Google Tag Manager -->
	<!-- 페이지의 <head>에서 가능한 한 높은 위치에 코드를 붙여넣으세요. -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NBP5CQ9');</script>
	<!-- End Google Tag Manager -->
			
	<!-- Google Tag Manager (noscript) -->
	<!-- 또한 여는 <body> 태그 바로 뒤에 코드를 붙여넣으세요. -->
	<noscript>
		<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NBP5CQ9"height="0" width="0" style="display:none; visibility:hidden"></iframe>
	</noscript>
	<!-- End Google Tag Manager (noscript) -->
	
	
	<!-- 페이스북 Meta Pixel Code -->
	<script>
	  !function(f,b,e,v,n,t,s)
	  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
	  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
	  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
	  n.queue=[];t=b.createElement(e);t.async=!0;
	  t.src=v;s=b.getElementsByTagName(e)[0];
	  s.parentNode.insertBefore(t,s)}(window, document,'script',
	  'https://connect.facebook.net/en_US/fbevents.js');
	  fbq('init', '5995234030505207');
	  fbq('track', 'PageView');
	</script>
	<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=5995234030505207&ev=PageView&noscript=1"/></noscript>
    
    <style>
    	.head-wrap{border-bottom:#e9e9e9 1px solid;}
    	.swi-box::before{background-color:#f9f9f9;}
    	.footer-wrap{margin-top:0;}
    	.hd-div{background-color:#fff;}
    	[name=COLLworkClrCd]:checked+label{
		  outline: 5px solid gray;
		}
		[name=WORKworkClrCd]:checked+label{
		  outline: 5px solid gray;
		}
		/* Chrome, Safari, Edge, Opera */
		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
		  -webkit-appearance: none;
		  margin: 0;
		}
		/* Firefox */
		input[type=number] {
		  -moz-appearance: textfield;
		}
    </style>
    
    <link rel="icon" type="image/png" href="/resources/img/favicon.png">
    <link type="text/css" rel="stylesheet" href="/resources/css/common_new.css"/>
</head>
<body>
	<th:block th:replace="thymeleaf/header :: headerFragment"></th:block>
    <div id="container">
        <div class="mypage_wrap">
            <h2>전시후기/소개</h2>
            <div class="mypage_contents">
				<div id="left_menu"></div>
                <div class="contents_right">
                    <div class="mypage_search_wrap">
                          <div class="search">
                            <label for="search_input" class="hidden">검색</label>
                            <input type="text" id="search_input" onkeydown="enter(event)" placeholder="검색어를 입력해 주세요." >
                            <button class="btn_mypage_search" onclick="searchMyShow()"></button>
                          </div>
                          <button th:if="${#strings.isEmpty(mbrSq)}" class="btn_mypage_recording" onclick="location.href='/myPage/myExhibit_reg'">기록하기</button>
                    </div>
                    <div class="mypage_tap_wrap">
                    <th:block th:if="${#strings.isEmpty(mbrSq)}">
                        <ul class="tap">
                            <li id="btn_nal1" class="on bg_no">전체(<span id="myTotal"></span>)</li>
                            <li id="btn_nal2" >소장품(<span id="myCollTotal"></span>)</li>
                            <li id="btn_nal3" >창작품(<span id="myWorkTotal"></span>)</li>
                            <li id="btn_nal4" class="bg_no"><img src="/resources/img/img_new/ico_tap_setting.png" alt=""> 게시글 관리</li>
                        </ul>
                    </th:block>
                    <th:block th:unless="${#strings.isEmpty(mbrSq)}">
                        <ul class="tap">
                            <li id="btn_nal1" class="on bg_no">전체(<span id="myTotal"></span>)</li>
                            <li id="btn_nal2" >소장품(<span id="myCollTotal"></span>)</li>
                            <li id="btn_nal3" class="bg_no">창작품(<span id="myWorkTotal"></span>)</li>
                        </ul>
                    </th:block>
                    </div>
                    
	                <div class="work-drp">
						<div class="work-hov">
							<ul>
								<li><a href="#" class="wrh-1"><span>공개/비공개</span></a></li>
								<li><a href="#" class="wrh-2"><span>작품정보수정</span></a></li>
								<li><a href="#" class="wrh-3"><span>삭제</span></a></li>
							</ul>
						</div>
					</div>
					
					<div class="work-drp-2 dp_n">
						<div class="wd-box">
							<span style="color:white" id="selectedCount">(0)</span>
							<button type="button" class="wd-btns wdb-1">공개</button>
							<button type="button" class="wd-btns wdb-1">비공개</button>
							<button type="button" class="wd-btns wdb-2">판매정보수정</button>
							<button type="button" class="wd-btns wdb-3">삭제</button>
							<button type="button" class="wd-btns wdb-all">취소</button>
						</div>
					</div>
					
                    <div th:if="${#strings.isEmpty(mbrSq)}" class="mypage_select_wrap">
                        <div class="sel_sorting right0">
                            <select name="sel_sort" id="sel_sort">
                                <option value="all">정렬</option>
                                <option value="recent">최신순</option>
                                <option value="recent_popul">최근 인기 순</option>
                                <option value="popul">역대 인기 순</option>
                                <option value="past">과거 순</option>
                            </select>
                        </div>
                        <div class="sel_sorting right170">
                            <select name="sel_open" id="sel_open">
                                <option value="all">형태</option>
                                <option value="Y">공개</option>
                                <option value="N">비공개</option>
                            </select>
                        </div>
                        <div class="sel_sorting right340">
                            <select name="sel_gubun" id="sel_gubun">
                                <option value="">구분</option>
                                <option value="GAL">갤러리</option>
                                <option value="ART">미술관</option>
                                <option value="POP">팝업전시</option>
                                <option value="FAI">페어</option>
                                <option value="ETC">기타</option>
                            </select>
                        </div>
                 	    <div class="sel_sorting right510">
                            <select name="sel_region" id="sel_region">
                                <option value="">지역</option>
                                <option value="SEO">서울</option>
                                <option value="INC">인천</option>
                                <option value="GYE">경기</option>
                                <option value="GAN">강원</option>
                                <option value="CGN">충남</option>
                                <option value="CGB">충북</option>
                                <option value="SEA">세종</option>
                                <option value="DAJ">대전</option>
                                <option value="JNB">전북</option>
                                <option value="JNN">전남</option>
                                <option value="GWA">광주</option>
                                <option value="GGB">경북</option>
                                <option value="GGN">경남</option>
                                <option value="DAG">대구</option>
                                <option value="ULS">울산</option>
                                <option value="BUS">부산</option>
                                <option value="JEA">제주</option>
                            </select>
                        </div>
                    </div>
                    <!-- 타인 마이페이지 일 때 -->
                    <div th:unless="${#strings.isEmpty(mbrSq)}" class="mypage_select_wrap">
                        <div class="sel_sorting right0">
                            <select name="sel_sort" id="sel_sort">
                                <option value="all">정렬</option>
                                <option value="recent">최신순</option>
                                <option value="recent_popul">최근 인기 순</option>
                                <option value="popul">역대 인기 순</option>
                                <option value="past">과거 순</option>
                            </select>
                        </div>
                        <div class="sel_sorting right170">
                            <select name="sel_gubun" id="sel_gubun">
                                <option value="">구분</option>
                                <option value="GAL">갤러리</option>
                                <option value="ART">미술관</option>
                                <option value="POP">팝업전시</option>
                                <option value="FAI">페어</option>
                                <option value="ETC">기타</option>
                            </select>
                        </div>
                 	    <div class="sel_sorting right340">
                            <select name="sel_region" id="sel_region">
                                <option value="">지역</option>
                                <option value="SEO">서울</option>
                                <option value="INC">인천</option>
                                <option value="GYE">경기</option>
                                <option value="GAN">강원</option>
                                <option value="CGN">충남</option>
                                <option value="CGB">충북</option>
                                <option value="SEA">세종</option>
                                <option value="DAJ">대전</option>
                                <option value="JNB">전북</option>
                                <option value="JNN">전남</option>
                                <option value="GWA">광주</option>
                                <option value="GGB">경북</option>
                                <option value="GGN">경남</option>
                                <option value="DAG">대구</option>
                                <option value="ULS">울산</option>
                                <option value="BUS">부산</option>
                                <option value="JEA">제주</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mypage_exhint_contents_wrap">
                        <div class="exhint_row">
                            <div class="exhint_list_img"><img src="/resources/img/img_new/sample_exhint01.jpg" alt=""><div class="ico_num">1+</div></div>
                            <div class="contents width75per">
                                <ul>
                                    <li>
                                        <div class="tit">
                                            <em>희망을 주는 그림</em>                                                                
                                        </div>
                                    </li>
                                    <li class="pt20 height120"><p>요즘 제가 가장 좋아하는 갤러리 맨션나인~ 날씨도 좋고 방배동으로 가 보려 구요. 요즘 제가 가장 좋아하는 갤러리 맨션나인~ 날씨도 좋고 방배동으로 가 보려 구요.
                                        요즘 제가 가장 좋아하는 갤러리 맨션나인~ 날씨도 좋고 방배동으로 가 보려 구요. 요즘 제가 가장 좋아하는 갤러리 맨션나인~ 날씨도 좋고 방배동으로 가 보려 구요.</p></li>
                                    <li>
                                        <div class="user_wrap">
                                            <div class="user">
                                                <ul>
                                                    <li class="pt5"><img src="/resources/img/img_new/ico_dauser.png" alt=""></li>
                                                    <li class="user_name"><span>딜링아트</span></li>
                                                </ul>
                                            </div>
                                            <div class="icon_box">
                                                <ul>
                                                    <li><p class="ico_good"></p><span>99</span></li>
                                                    <li><p class="ico_scrap"></p><span>99</span></li>
                                                    <li><p class="ico_hits"></p><span>99</span></li>
                                                    <li><p class="ico_comments"></p><span>99</span></li>
                                                </ul>
                                            </div>
                                        </div>                                
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pagination">
                        <div class="paginate">                        
                            <strong>1</strong>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#">4</a>
                            <a href="#">5</a>
                            <a href="#">6</a>
                            <a href="#">7</a>
                            <a href="#">8</a>
                            <a href="#" class="next ml10"></a>
                            <a href="#" class="next_end ml5"></a>
                        </div>
                    </div>    
              </div>
            </div>
        </div>
    </div>
    <th:block th:replace="thymeleaf/footer :: footerFragment"></th:block>
</body>
<script th:inline="javascript">

var mbrSq = /*[[${mbrSq}]]*/ 'default';

var searchOptions = new Object();
var result = new Object();
var nowPage = 0;
var offset = 0;

	var pageNextBtnCount = 0;
   	var endPage = 0;
   	var startPage = 0;
   	var realEndPage = 0;
   	var prev = false;
   	var next = false;

$("document").ready(function(){
	
	if(isMobile){
		$(".sel_sorting").attr("class", "sel_sorting");
	}
	
	if(mbrSq != null && mbrSq != "" && mbrSq != undefined){ //타인 마이페이지면
		$("#left_menu").load("/myPage/mypage_common_left", "mbrSq="+mbrSq);  // 레프트 메뉴 삽입
		searchOptions.mbrSq = mbrSq;
	}else{
		$("#left_menu").load("/myPage/mypage_common_left");  // 레프트 메뉴 삽입
		searchOptions.mbrSq = sMbrSqVal;
	}
	searchOptions.comtTypCd ="EXH";

	ShowListAjax();
	
});

function ShowListAjax(callback){
	
	searchOptions.limit = 4;
	searchOptions.offset = nowPage * 4;
	
	$.ajax({
		type: "POST"
		, url: "/myPage/MyShowListserch"
		, data: searchOptions
		, success: function(data){
			console.log(data.result)
			ShowList(data,callback);
		}
		, error: function(data){
			alert("오류 발생" + error);
		}
	});
}

function ShowList(data,callback){
	var html = '';
	
	result = data.result;
	var Total = data.myTotal;
	var workTotal = data.myWorksTotal;
	var collTotal = data.myCollTotal;
	
	
	
	if(result.length > 0){
    	for(i=0; i<result.length; i++){

        		if(result[i] != null){
        			html +=	'<div class="exhint_row">';
	            	html +=	'<div class="exhint_list_img"><img src="'+result[i].comtImgUrl+'" style="width:100%; height:100%;"><div class="ico_num">1+</div></div>';
	            	if(!isMobile){
	            		html += '<div class="contents width75per">';
	            	}else{
	            		html +=	'<div class="contents">';
	            	}
                	html += '		<div class="item-ho4 check-div" style="display:none;">';
                	html += '			<div class="pay-check mana-check">';
                	html += '				<input type="checkbox" id="'+result[i].comtSq+'" name="chkWorkSq" value="'+result[i].dealSq+'" onclick="selectedCount()">';
					html += '				<label for="'+result[i].comtSq+'"><span></span></label>';
					html += '			</div>';
					html += '		</div>';
	            	html += '   <ul>';
					if(result[i].cmtOpenYn != "N"){
						html += '			<button type="button" class="workOpenYnBtn" style="display:none;"><span class="iv-span" workSq="'+result[i].workSq+'" onclick="openYn(this)"></span></button>';
					}else{
						html += '			<button type="button" class="workOpenYnBtn" style="display:none;"><span class="iv-span active" workSq="'+result[i].workSq+'" onclick="openYn(this)"></span></button>';
					}
	            	html += '   <a href="/community/exhibitDetail?SqNumber='+result[i].comtSq+'">';
	            	html += '       <li>';
	            	html += '           <div class="tit">'; 
	            	html += '               <em>'+result[i].comtTitle+'</em>';                                                                
	            	html += '           </div>';
	            	html += '       </li>';
	            	if(!isMobile){
	            		html += '       <li class="comt_content pt20 height120"><p>'+result[i].cmtContent+'</p></li>';
	            	}else{
	            		html += '       <li class="pt10 height_18_5rem comt_content"><p>'+result[i].cmtContent+'</p></li>';
	            	}
	            	html += '      </a>';
	            	html += '      <li class="comt-row-info">';
	            	html += '           <div class="user_wrap">';
	            	html += '               <div class="user">';
	            	html += '                   <ul>';
	            	if(!isMobile){
	            		if(result[i].mbrProfileImgUrl != null && result[i].mbrProfileImgUrl !=""){
	            			html +=		'                <li class="user_img"><img src="'+result[i].mbrProfileImgUrl+'" alt=""></li>';
	                	}else{
	                		html +=		'                <li class="user_img"><img src="/resources/img/img_new/ico_dauser.png" alt=""></li>';
	                	}
	            	}else{
	            		if(result[i].mbrProfileImgUrl != null && result[i].mbrProfileImgUrl !=""){
	            			html +=		'                <li class="pt5"><img src="'+result[i].mbrProfileImgUrl+'" alt=""></li>';
	                	}else{
	                		html +=		'                <li class="pt5"><img src="/resources/img/img_new/ico_dauser.png" alt=""></li>';
	                	}
	            	}
	            	html += '                      <li class="user_name"><span>'+result[i].mbrNcknm+'</span></li>';
	            	html += '                  </ul>';
	            	html += '               </div>';
	            	html += '               <div class="icon_box">';
	            	html += '                   <ul>';
	            	html +=		'                    <li><p class="ico_good"></p><span>'+result[i].cmtLikes+'</span></li>';
	            	html +=		'                    <li><p class="ico_scrap"></p><span>'+result[i].cmtScraps+'</span></li>';
	            	html +=		'                    <li><p class="ico_hits"></p><span></span>'+result[i].cmtViews+'</li>';
	            	html +=		'                    <li><p class="ico_comments"></p><span>'+result[i].cmtTotalCount+'</span></li>';
	            	html += '                   </ul>';
	            	html += '               </div>';
	            	html += '           </div>';                                
	            	html += '       </li>';
	            	html += '   </ul>';
	            	html +=	'</div>';
	            	html +=	'</div>';
        		}
    	}

    	$(".mypage_exhint_contents_wrap").empty();
        $(".mypage_exhint_contents_wrap").append(html).trigger("create");
        setContentText($(".comt_content"));
		masonryLayout(callback);
		setPagenation(data);
	}else{
		$(".mypage_exhint_contents_wrap").empty();
		$(".paginate").empty();
   		if(searchOptions.workTypCd === undefined && searchOptions.keyword === undefined){
   			if(!isMobile){
       			modalAlertShow("검색 결과가 없습니다.");
       		}else{
       			alert("검색 결과가 없습니다.");
       		}
   		}else{
   			if(!isMobile){
       			modalAlertShow("검색 결과가 없습니다.", "reload");
       		}else{
       			alert("검색 결과가 없습니다.");
       			location.reload();
       		}
   		}
	}		
	
	$("#myTotal").text(Total);
	$("#myCollTotal").text(collTotal);
	$("#myWorkTotal").text(workTotal);
}

	// 작성 글 내용 텍스트만 가져오기
	function setContentText(content) {
		// ck에디터 태그 제외하기 위한 정규식
		var regex = /ck-/;
		
		$.each(content, function(idx, item) {
			var childTags = $(item).children();
			var text = "";
			
			$.each(childTags, function(idx, item) {
				var tagClasses = $(item).attr("class");
				
				// 클래스가 있을 경우
				if(tagClasses) {
					// ck-로 시작하는 클래스명이 없을 경우 텍스트를 가져옴
					if(tagClasses.search(regex) === -1) {
						text += $(item).text();
					}
				} else {
					text += $(item).text();
				}
			});
			
			$(item).html(text);
		});
	}

//화면 레이아웃 추가
function masonryLayout(callback) {
 	/* var msnry = new Masonry( '.exhint_row', {
  		itemSelector: '.contents',
  	  	columnWidth: 360,
  	  	gutter: 10,
  	  	horizontalOrder: true,
  	  	// originLeft: false //왼쪽부터 정렬 
  	  	// originTop: false //바닥부터
  	  	transitionDuration: '0.2s' //위치 전환 시간
	}); */

	imagesLoaded( '.exhint_row' ).on( 'progress', function() {
		msnry.layout();
	});
	
	if(callback == "wrh1"){
		wrh1Callback();
	}
	if(callback == "wrh2"){
		wrh2Callback();
	}
	if(callback == "wrh3"){
		wrh3Callback();
	}
}

</script>
<!-- 마이페이지 커뮤니티관련 페이지 공통 스크립트 -->
<script type="text/javascript" src="/resources/js/mypage_commu_common.js"></script>

</html>